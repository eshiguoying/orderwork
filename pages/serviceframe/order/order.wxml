<scroll-view class='ordercontainer' 
             style='width:{{windowW}}px;height:{{windowH - 50}}px' 
            scroll-y 
            bindscrolltolower='bindDownLoad'>

  <block wx:if="{{orderlist.length > 0}}">
    <block wx:for="{{orderlist}}" wx:for-item="orderItem" wx:for-index="index">
      <view class='order_item' >
        <view class='deliverytype {{orderItem.order.serviceType}}'>{{orderItem.order.serviceTypeDesc}}</view>
        <view class='select_item' 
              style='transform: translate({{multiplechoiceflag?  0 : 40}}px, 0%)'
              data-index='{{index}}' 
              catchtap='picthupone'>
            <view class='container_mulchoice' >
              <view class="select_one  {{orderItem.selected? '':'selected_'}}"></view>
            </view>
        </view>

        <view class='order_body' catchtap='loadorderdetails' data-id='{{orderItem.order.id}}' data-index='{{index}}'>
          <view class='body' style='width:{{windowW - 35}}px;' >
            <view class='cusinfo_'>
              <view class='item_'>
                <view class='photo '>
                  <image src='../../../images/cus.png'></image>
                </view>
                <view class='info'>测试用</view>
              </view>
              <view class='item_'>
                <view class='photo'>
                  <image src='../../../images/lug.png'></image>
                </view>
                <view class='info'>{{orderItem.order.num}}件</view>
              </view>
              <view class='item_'>
                <view class='photo'>
                  <image src='../../../images/staff.png'></image>
                </view>
                <view class='info'>{{orderItem.charge}}</view>
              </view>
              <view class='orderstatus'>
                <view class='info'>{{orderItem.order.statusdesc}}</view>
                <view class='photo'>
                  <image src='../../../images/right_arrows.png'></image>
                </view>
              </view>
            </view>
            <view class='item'>
              <view class='photo'>
                <image src='../../../images/addrtype.png'></image>
              </view>
              <view class='info'>
                {{orderItem.orderAddress.srcaddrtypedesc}} ~ {{orderItem.orderAddress.destaddrtypedesc}}
              </view>
            </view>
            <view class='item'>
              <view class='photo'>
                <image src='../../../images/clock.png'></image>
              </view>
              <view class='info'>
                {{orderItem.order.taketimepart}} ~ {{orderItem.order.sendtimepart}}
              </view>
            </view>
            <view class='item'>
              <view class='photo send_'>●</view>
              <view class='info'>{{orderItem.orderAddress.srcaddress}}</view>
            </view>
            <view class='item'>
              <view class='photo take_'>●</view>
              <view class='info'>{{orderItem.orderAddress.destaddress}}</view>
            </view>
          </view>
        </view>
        </view>
    </block>
  </block>
  <block wx:else>
    <view class='orderlist_empty' style='width:{{windowW}}px;height:{{windowH - 50}}px' >
      <view class='image'>
        <image src='../../../images/orderlist_empty.png'></image>
      </view>
      <view class='lable'>未查询到订单</view>
    </view>
  </block>
</scroll-view>

<view class='floatpanel' style='width:{{windowW}}px;'>
  <view class='refreshbut item' catchtap='refreshtap'>
    <image src='../../../images/refresh_24.png'></image>
  </view>
  <view class='filtrate item'>
    <view class='veri' catchtap='screenchoice'>筛选</view>
  </view>
  <view class='multiplechoice item' catchtap='tomutlchoice'>
    <view class='veri'>多选</view>
  </view>
</view>

<view class="mulchoicepanal" style='width:{{windowW}}px;transform: translate({{multiplechoiceflag?  0 : windowW}}px, 0%)'>
    <view class='mulchoiceflag' catchtap='mulchoiceflag'>
      <block wx:if="{{mulchoiceflag}}">
        取消全选
      </block>
       <block wx:else>
          全选
      </block>
    </view>
    
    <view class='batch_changesend' catchtap='batchchangesendtap'>
      <view class='veri'>
        批量改派
      </view>
    </view>

    <view class='batch_orderstatus_change'><view class='veri'>批量状态更改</view></view>
    <view class='cancelmulchoice' catchtap='mutlchoice_cancal'>
      <view class='veri'>取消</view>
    </view>
</view>


<view class="screenpanal" style='width:{{windowW}}px;transform: translate({{screenchoiceflag?  0 : windowW}}px, 0%)'>
    <view class='head'>
        <view class='item cancal_'  catchtap='cancalorderparam'>取消</view>
        <view class='reset_' catchtap='resetorderparam'>重置</view>
        <view class='item sure_' catchtap='queryorderlist_but'>确定</view>
    </view>
    <view class='query_body'>
      <view class='margin_body'>
        <view class='line orderbody'>
           <input class='item orderno' placeholder='订单号' bindinput='orderno_input' value='{{queryorderlistReqPram.orderno}}'></input>
           
           <block wx:if="{{queryorderlistReqPram.orderno.length > 0}}">
            <view class='deleteinfo' catchtap='deletequeryparam' data-key='orderno' data-type='simple'>
              <image src='../../../images/delete.png'></image>
            </view>
           </block>
        </view>

        <block wx:if="{{accountInfo.appUser.level == 1}}">
          <view class='line trileveldistribody'>
            <input class='item'
                   disabled='true' 
                   catchtap='showtrileveldistribution' value='{{queryorderlistReqPram.distributorname}}' placeholder='三级分销商'></input>
            <view class="list trileveldistri_list  {{isviewtrileveldistri? '' : 'nosee'}}">
              <!-- <view class='cancel' catchtap='cancaltrileveldistribution'>清空</view> -->
              <scroll-view class='srcoll_list' scroll-y>
                <block wx:for="{{distributorArr}}">
                  <view class='item_'  data-id="{{item.id}}" data-name="{{item.name}}" bindtap='selectDistributor'>
                    {{item.name}}
                  </view>
                </block>
              </scroll-view>
            </view>

            <block wx:if="{{queryorderlistReqPram.distributorname.length > 0}}">
              <view class='deleteinfo' catchtap='deletequeryparam' data-key='distributor' data-type='complex'>
                <image src='../../../images/delete.png'></image>
              </view>
            </block>
          </view>
        </block>


        <!-- 柜台 -->
        <block wx:if="{{counterArr.length != 0}}">
          <view class='line counterbody'>
            <input class='item' 
                    disabled='true'
                    catchtap='showcounterbody' 
                    value='{{queryorderlistReqPram.countername}}' placeholder='柜台'></input>
            <view class="list counter_list  {{isviewcounter? '' : 'nosee'}}">
              <!-- <view class='cancel' catchtap='cancalcounter'>清空</view> -->
              <scroll-view class='srcoll_list' scroll-y>
                <block wx:for="{{counterArr}}">
                  <view class='item_'  data-id="{{item.id}}" data-name="{{item.servicecentername}}" bindtap='selectCounter'>
                    {{item.servicecentername}}
                  </view>
                </block>
              </scroll-view>
            </view>

            <block wx:if="{{queryorderlistReqPram.countername.length > 0}}">
              <view class='deleteinfo' catchtap='deletequeryparam' data-key='counter' data-type='complex'>
                <image src='../../../images/delete.png'></image>
              </view>
            </block>
          </view>
        </block>

      <!-- 订单负责人 -->
       <block wx:if="{{accountInfo.appUser.level != 3}}"> 
        <block wx:if="{{orderChargeArr.length != 0}}">
          <view class='line orderofficerbody'>
            <input class='item' 
                   disabled='true'
                   catchtap='showofficerbody' 
                   value='{{queryorderlistReqPram.username}}' placeholder='订单负责人'></input>
            <view class="list orderofficer_list  {{isviewofficerbody? '' : 'nosee'}}">
              <!-- <view class='cancel' catchtap='cancalorderoffice'>清空</view> -->
              <scroll-view class='srcoll_list' scroll-y>
                <block wx:for="{{orderChargeArr}}">
                  <view class='item_'  data-id="{{item.id}}" data-name="{{item.name}}" bindtap='selectOrderCharge'>
                    {{item.name}}
                  </view>
                </block>
              </scroll-view>
            </view>

            <block wx:if="{{queryorderlistReqPram.username.length > 0}}">
              <view class='deleteinfo' catchtap='deletequeryparam' data-key='user' data-type='complex'>
                <image src='../../../images/delete.png'></image>
              </view>
            </block>
        </view>
        </block>
       </block>

        <view class='line orderstatus'>
          <view class='item statusbody'>
            <view class='status'  data-status="待分配" data-code="PREPAID" bindtap='checkTap'>
              <view class="check {{queryorderlistReqPram.PREPAID ? 'selected' : ''}}"></view>
              <label class="order-pop-status">待分配</label>
            </view>
              <view class='veri'></view>
            <view class='status' data-status="待提取" data-code="WAITPICK" bindtap='checkTap'>
               <view class="check {{queryorderlistReqPram.WAITPICK ? 'selected' : ''}}"></view>
               <label class="order-pop-status">待提取</label>
            </view>
              <view class='veri'></view>
            <view class='status' data-status="配送中" data-code="DELIVERYING" bindtap='checkTap'>
               <view class="check {{queryorderlistReqPram.DELIVERYING ? 'selected' : ''}}"></view>
               <label class="order-pop-status">配送中</label>              
            </view>
              <view class='veri'></view>
            <view class='status' data-status="已送达" data-code="DELIVERYOVER" bindtap='checkTap'>
              <view class="check {{queryorderlistReqPram.DELIVERYOVER ? 'selected' : ''}}"></view>
              <label class="order-pop-status">已送达</label>
            </view>
              <view class='veri'></view>
            <view class='status' data-status="已完成" data-code="COMPLETED" bindtap='checkTap'>
              <view class="check {{queryorderlistReqPram.COMPLETED ? 'selected' : ''}}"></view>
              <label class="order-pop-status">已完成</label>
            </view>
          </view>
        </view>

        <view class='line starttimebody' bindtap='showStartTime'>
           <input class='item starttime' placeholder='订单开始时间' disabled='true' value='{{queryorderlistReqPram.startTimeShow}}'></input>
           
           <block wx:if="{{queryorderlistReqPram.startTimeShow.length > 0}}">
              <view class='deleteinfo' catchtap='deletequeryparam' data-key='startTimeShow' data-type='other'>
                <image src='../../../images/delete.png'></image>
              </view>
           </block>

        </view>

        <view class='line endtimebody' bindtap='showEndTime'>
           <input class='item endtime' placeholder='订单结束时间' disabled='true' value='{{queryorderlistReqPram.endTimeShow}}'></input>
        
          <block wx:if="{{queryorderlistReqPram.endTimeShow.length > 0}}">
              <view class='deleteinfo' catchtap='deletequeryparam' data-key='endTimeShow' data-type='other'>
                <image src='../../../images/delete.png'></image>
              </view>
          </block>

        </view>
        
        <!-- 选择时间 -->
        <view class="canlendar-layer {{showStartTime? '':'canlendar_hide'}}">
          <view class="head__" data-type="start">
            <view class='space'></view>
            <view class='cancel' catchtap='canlendar_cancal_but' data-type='start'>x</view>
          </view>

          <view class='datebody_'>
            <canlendar id="canlendar" 
                      select-year="{{queryorderlistReqPram.s_year}}"  
                      select-month="{{queryorderlistReqPram.s_month}}"  
                      select-day="{{queryorderlistReqPram.s_day}}" 
                      type="start" 
                      bind:selectDayEvent="_selectDayEvent" />
          </view>

        </view>

         <view class="canlendar-layer {{showEndTime? '':'canlendar_hide'}}">
            <view class="head__" data-type="start">
              <view class='space'></view>
              <view class='cancel' catchtap='canlendar_cancal_but' data-type='end'>x</view>
            </view>

            <canlendar id="canlendar2" 
                       select-year="{{queryorderlistReqPram.e_year}}"  
                       select-month="{{queryorderlistReqPram.e_month}}"  
                       select-day="{{queryorderlistReqPram.e_day}}" 
                       type="end" 
                       bind:selectDayEvent="_selectDayEvent" />
        </view>

      </view>
    </view>
</view>


<view class='screenpanalshade' style="width:{{windowW}}px;height:{{windowH}}px;display:{{screenchoiceflag? '':'none'}}" ></view>


<view class="orderdetailspanal" 
      style='width:{{windowW}}px;height:{{windowH}}px;transform: translate({{orderdetailshowflag?  0 : windowW}}px, 0%)'>
  <view class='head'>
    <view class='cancal' catchtap='closeorderdetailsbut'>
      <image src='../../../images/Cancel.png'></image>
    </view>
  </view>
  <view class='orderdetails_body'>
    <block wx:if="{{orderdetailshowflag}}">
      <orderdetails orderid="{{orderdetailsByorderid}}" orderIndex="{{orderIndex}}" bind:lowlevel_changeallow="lowlevel_changeallow" bind:nonlowlevel_changeallow="_nonlowlevel_changeallow"/>
    </block>
  </view>
</view>


<block wx:if="{{isshowstafflistpanel}}"> 
  <stafflist distributorId="{{distributor3rd}}" 
             bind:closestafflistpanel="closestafflistpanel" 
             bind:sure_changeallow_staff="sure_changeallow_staff"/>
</block>
